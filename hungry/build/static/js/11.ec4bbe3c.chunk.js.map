{"version":3,"sources":["page/CommodityDetails/CommodityDetails.jsx"],"names":["CommodityDetails","props","_this","Object","D_liwanqing_everymonth_1612A_0720_hangryy_hungry_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_liwanqing_everymonth_1612A_0720_hangryy_hungry_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_liwanqing_everymonth_1612A_0720_hangryy_hungry_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","json","apply","food","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","Fragment","className","src","image","name","sellcount","rating","price","oldPrice","info","onClick","all","length","recommend","filter","item","rateType","Tweet","map","index","key","farmatDate","rateTime","username","avatar","alt","antd__WEBPACK_IMPORTED_MODULE_7__","type","text","setState","location","query","console","log","goods","foods","ratings","number","format","time","Date","newArr","formatArr","i","push","getFullYear","formatNumber","getMonth","getDate","getHours","getMinutes","getSeconds","replace","n","toString","Component","connect","dispatch"],"mappings":"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","file":"static/js/11.ec4bbe3c.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport \"./CommodityDetails.css\"\r\nimport { Icon } from 'antd';\r\nimport {connect} from \"react-redux\"\r\nclass CommodityDetails extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            json:[],\r\n            apply:[],\r\n            food:{}\r\n         };\r\n         \r\n    }\r\n    render() {\r\n        return (\r\n             <>\r\n           <div className=\"commodity\">\r\n               \r\n            <div className='headerImg'><img src={this.state.food.image} /></div>\r\n            <div className='headerText'>\r\n              <p><span>{this.state.food.name}</span></p> \r\n              <p><span>月售{this.state.food.sellcount}</span> <span>好评率 {this.state.food.rating}%</span></p> \r\n              <p>\r\n                  <b>￥{this.state.food.price}</b>\r\n                  <b>￥ {this.state.food.oldPrice} </b>\r\n                  <b></b>\r\n                  <span>加入购物车</span>\r\n              </p>\r\n            </div>\r\n            <div className='header'></div>\r\n            <div className='introduction'>\r\n                <h2>商品介绍</h2>\r\n                <p> {this.state.food.info}</p>\r\n            </div>\r\n            <div className='header'></div>\r\n            <div className=\"comments\">\r\n                <div className='commentsHeader'>\r\n                <h2>商品评论</h2>\r\n                <p><span onClick={()=>this.all()}>全部{this.state.json.length}</span><span onClick={()=>this.recommend()}>推荐{this.state.json.filter(item=>item.rateType===0).length}</span><span onClick={()=>this.Tweet()}>吐槽{this.state.json.filter(item=>item.rateType===1).length}</span></p>\r\n                </div>\r\n               <div className=\"commentsText\">\r\n                  {\r\n                    this.state.apply.map((item,index)=>(\r\n                       <div className=\"commentsEver\" key={index}>\r\n                          <p><span>{this.farmatDate(item.rateTime,'Y-M-D h:m:s')}</span><b></b><span>{item.username} <img src={item.avatar} alt=\"\"/></span></p> \r\n                          <p>{item.rateType===0 ? <Icon type=\"like\" />:<Icon type=\"dislike\" />}<span>{item.text}</span></p>\r\n                          \r\n                       </div>\r\n                    )) \r\n                  } \r\n               </div>\r\n            </div>\r\n            </div> \r\n            \r\n            <footer>\r\n                    <div className=\"lwqfooterleft\">\r\n                        <span className=\"lwqshopicon\">\r\n                            \r\n                        </span>\r\n                        <span className=\"lwqshopprice\">￥0</span>\r\n                    </div>\r\n                    <div className=\"lwqfootercenter\">\r\n                        <span>另需配送费￥4元</span>    \r\n                    </div>\r\n                    <div className=\"lwqfooterright\">\r\n                        <span>￥20起送</span>\r\n                    </div>\r\n                </footer>\r\n \r\n\r\n             </>\r\n        );\r\n    }\r\n       all(){\r\n           this.setState({\r\n              apply:this.state.json \r\n           })\r\n       }\r\n       recommend(){\r\n        this.setState({\r\n            apply:this.state.json.filter(item=>item.rateType===0) \r\n         })\r\n       }\r\n       Tweet(){\r\n        this.setState({\r\n            apply:this.state.json.filter(item=>item.rateType===1) \r\n         })\r\n       }\r\n\r\n\r\n    componentWillMount(){\r\n        let index=this.props.location.query.index;\r\n        let name=this.props.location.query.name;\r\n        console.log(index,name)\r\n        let food= this.props.goods[index].foods.filter(item=>item.name==name)[0]\r\n   \r\n        console.log(food)\r\n          this.setState({\r\n              food:food,\r\n              json:food.ratings,\r\n              apply:food.ratings\r\n          })\r\n       \r\n    }\r\n \r\n     farmatDate(number, format) {\r\n        let time = new Date(number)\r\n        let newArr = []\r\n        let formatArr = ['Y', 'M', 'D', 'h', 'm', 's']\r\n        newArr.push(time.getFullYear())\r\n        newArr.push(this.formatNumber(time.getMonth() + 1))\r\n        newArr.push(this.formatNumber(time.getDate()))\r\n    \r\n        newArr.push(this.formatNumber(time.getHours()))\r\n        newArr.push(this.formatNumber(time.getMinutes()))\r\n        newArr.push(this.formatNumber(time.getSeconds()))\r\n    \r\n        for (let i in newArr) {\r\n            format = format.replace(formatArr[i], newArr[i])\r\n        }\r\n        return format;\r\n      }\r\n      formatNumber (n) {\r\n        n = n.toString()\r\n        return n[1] ? n : '0' + n;\r\n    }\r\n       \r\n     \r\n\r\n\r\n}                      \r\n\r\n const mao =state=>{\r\n      return state\r\n  }\r\n const mapp = dispatch=>({\r\n\r\n })\r\n\r\n \r\nexport default connect(mao,mapp)(CommodityDetails);"],"sourceRoot":""}